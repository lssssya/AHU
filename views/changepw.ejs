<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>不忘_登陆_测试</title>
    <link rel="stylesheet" href="/css/login.css">
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/setting.css">
    <link rel="stylesheet" href="/lib/bootstrap/dist/css/bootstrap.css">
    <script src="/lib/jquery/jquery.js"></script>
</head>
<body>
<%- include('common/home-aside.ejs',{data:sessionpart}) -%>
<!--右边下部分，网站的主体页面-->
<div class="main">
    <%- include('common/setting-head.ejs',{data:sessionpart}) -%>
    <div class="body">
        <div class="loginform">
            <form>
                <div class="form-group">
                    <label for="password" class="sr-only"></label>
                    <input type="password" class="form-control" id="password" placeholder="原始密码">
                </div>
                <div class="form-group">
                    <label for="password1" class="sr-only"></label>
                    <input type="password" class="form-control" id="password1" placeholder="新密码">
                </div>
                <div class="form-group">
                    <label for="password2" class="sr-only"></label>
                    <input type="password" class="form-control" id="password2" placeholder="确认密码">
                </div>
                <button type="submit" class="btn btn-default " id="submit">确定修改</button>
            </form>
        </div>
    </div>
</div>
<script>
    var userID=""; //userID
    $(document).ready(function() {
        $("#submit").click(function(event){
            event.preventDefault();
            var password = $("#password").val();
            var password1 = $("#password1").val();
            var password2 = $("#password2").val();
            var data = {"userID":userID,"rowPw":password,"pw":password1};
            if (password==""){
                alert("请输入原始密码");
            }
            else{
                if (password1==""){
                    alert("请输入新密码");
                }
                else{
                    if (password1!=password2){
                        alert("两次输入密码必须一致")
                    }
                    else{
                        $.ajax({
                            type: 'POST',
                            url: window.location.pathname,
                            data: data,
                            success: function(data) {
                                if (data.ret_code === 0 ){
                                    alert("修改成功！");
                                };
                                if(data.ret_code === 1 ){
                                    alert("修改失败！")
                                };
                                if(data.ret_code === 2){
                                    alert("初始密码错误！")
                                }
                            }
                        });
                    }
                }
            }
            return false;
        });

    });
</script>
</body>
</html>